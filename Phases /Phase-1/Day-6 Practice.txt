ğŸ”µ Lab 6 â€” Security Setup
â€¢	RBAC roles
â€¢	Managed identity
â€¢	Disable keys
â€¢	Private endpoint (conceptual or demo)
â€¢	Network isolation


ğŸ”µ Step-1 â€” RBAC on Azure OpenAI Resource
In Microsoft Azure Portal:
â¡ Go to:
Azure OpenAI resource â†’ Access Control (IAM)
Click Role assignments.
You should see roles like:
â€¢ Cognitive Services OpenAI User
â€¢ Cognitive Services Contributor
â€¢ Owner / Contributor
âœ… What you want:
Role	Who
OpenAI User	apps / services
Contributor	ML engineers
Owner	admins only
ğŸ“Œ NOT recommended: Everyone = Owner.
________________________________________
ğŸ”µ Step-2 â€” Managed Identity (Production Auth)
Instead of API keys, production apps use:
ğŸ‘‰ Managed Identity + RBAC
Why?
â€¢ no secrets stored
â€¢ auto-rotated
â€¢ tied to Azure resource
â€¢ least privilege
Later, apps authenticate like:
App â†’ Managed Identity â†’ Azure OpenAI â†’ RBAC check â†’ Allowed
________________________________________
ğŸ” Quick check:
Open:
Azure OpenAI â†’ Keys & Endpoint
Youâ€™ll still see keys â€” but:
â—Enterprise systems should NOT rely on them long-term.
________________________________________
ğŸ”µ Step-3 â€” Disable Public Network Access
In Azure OpenAI:
â¡ Networking â†’ Public access
Options:
â€¢ Enabled
â€¢ Disabled (Private Endpoint only)
âœ… Enterprise choice:
Disable Public Access
Meaning:
âœ” only VNet traffic allowed
âœ” internet blocked
âœ” internal workloads only
________________________________________
ğŸ”µ Step-4 â€” API Keys Strategy
Even if keys exist:
âœ” donâ€™t store in code
âœ” avoid in prod
âœ” rotate often
âœ” replace with managed identity
If used temporarily:
ğŸ‘‰ store in Key Vault, not GitHub.
________________________________________
ğŸ”µ Step-5 â€” Network Isolation (Concept Level)
In regulated environments:
â€¢ Azure OpenAI
â€¢ App Service
â€¢ AKS
â€¢ VM
All sit in:
ğŸ‘‰ Virtual Network
ğŸ‘‰ Private Endpoint
ğŸ‘‰ Private DNS Zone
Traffic never leaves Azure backbone.
________________________________________
ğŸ§  Architecture:
App (VNet)
   |
Private Endpoint
   |
Azure OpenAI
No public IP. No internet exposure.
________________________________________
ğŸ”µ Step-6 â€” Security Checklist (You SHOULD Verify)
Open your resource and confirm:
âœ… RBAC enabled
âœ… minimal roles
âœ… public access restricted (optional now)
âœ… keys not used in apps
âœ… tags present (env, owner, costcenter)
âœ… diagnostics ready (Lab-7)
________________________________________
ğŸ¯ MINI-QUIZ (Answer fast ğŸ‘‡)
1ï¸âƒ£ Why is Managed Identity better than API keys?
âœ” no secrets in code
âœ” automatic rotation
âœ” RBAC-controlled
âœ” works with private endpoints
âœ” identity tied to workload
(Private endpoint is network â€” MI is auth, but they work together.)

2ï¸âƒ£ Which RBAC role should apps usually have?
âœ” Cognitive Services OpenAI User
NOT Contributor.
Contributor = manage deployments/config â†’ engineers only

3ï¸âƒ£ What happens when public access is disabled?
âœ” only traffic via Private Endpoint
âœ” no public IP access
âœ” internet blocked
âœ” VNet-only connectivity
(API keys may still exist â€” but unreachable publicly.)

4ï¸âƒ£ Where should secrets live temporarily?
Key Vault.

5ï¸âƒ£ Why isolate Azure OpenAI inside a VNet?
âœ” regulatory compliance
âœ” data residency
âœ” no internet exposure
âœ” zero-trust architecture
________________________________________
ğŸŸ¢ STATUS
Lab-6 is SECURITY HARDENING COMPLETE âœ”



Next ..
Lab-7 â€” Monitoring



