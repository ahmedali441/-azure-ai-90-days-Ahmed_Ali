ğŸ”µ Lab 7 â€” Monitoring
â€¢	Enable diagnostics
â€¢	Send logs to Log Analytics
â€¢	Token metrics
â€¢	Latency
â€¢	Errors



ğŸ”µ Step 1 â€” Open Metrics
Go to:
Azure Portal â†’ Azure OpenAI resource â†’ Monitoring â†’ Metrics
You are now inside Microsoft Azure Monitor.
________________________________________
â• Add These Metrics:
Click Add metric and choose:
Metric	Why
Tokens In	Prompt size
Tokens Out	Completion cost
Total Tokens	Billing driver
Requests	Traffic
Latency	Performance
Errors	Failures
________________________________________
ğŸ“Œ Scope = deployment
So you can compare:
ğŸ‘‰ chat model vs embedding model
________________________________________
ğŸ”µ Step 2 â€” View Token Cost Drivers
Switch aggregation:
â€¢ Sum â†’ total tokens
â€¢ Avg â†’ typical call size
Ask yourself:
âœ” which deployment burns more tokens?
âœ” spikes at certain times?
âœ” sudden jumps?
________________________________________
________________________________________
ğŸ”µ Step 3 â€” Enable Diagnostic Logs
Now go to:
Monitoring â†’ Diagnostic settings â†’ Add diagnostic setting
________________________________________
Enable:
âœ” AuditLogs
âœ” RequestResponseLogs (if available)
âœ” Metrics
________________________________________
Send to:
ğŸ‘‰ Log Analytics Workspace
(if none â†’ create new)
Name example:
openai-monitoring-law
________________________________________
________________________________________
ğŸ”µ Step 4 â€” Query Logs
Open:
Log Analytics â†’ Logs
Run:
AzureMetrics
| where ResourceProvider == "MICROSOFT.COGNITIVESERVICES"
| project TimeGenerated, MetricName, Total
| order by TimeGenerated desc
________________________________________
For errors:
AzureActivity
| where ActivityStatusValue == "Failed"
________________________________________
________________________________________
ğŸ”µ Step 5 â€” Alerts (VERY Important)
Go to:
Monitoring â†’ Alerts â†’ Create alert rule
________________________________________
Signal:
Metric â†’ Total Tokens
________________________________________
Condition:
Example:
Total Tokens > 50000 in 1 hour
________________________________________
Action group:
âœ” email
âœ” SMS
âœ” webhook
Name:
openai-cost-alert
________________________________________
________________________________________
ğŸ”µ Step 6 â€” Dashboards
Create a simple dashboard with:
â€¢ Tokens over time
â€¢ Requests
â€¢ Latency
â€¢ Errors
This is what SRE teams watch ğŸ‘€
________________________________________
________________________________________
ğŸ§  Mini-Check (Answer mentally)
1ï¸âƒ£ Which metric correlates MOST with cost?
â¡ Total Tokens
2ï¸âƒ£ What reveals slow apps?
â¡ Latency
3ï¸âƒ£ What detects runaway loops?
â¡ Request count + tokens
4ï¸âƒ£ Why logs matter for enterprises?
â¡ audit / security / compliance / investigations
________________________________________
Next..
Start Lab-8 â€” Responsible AI Controls
ğŸ˜


